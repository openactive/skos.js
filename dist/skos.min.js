var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var c=0;return function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,d){a!=Array.prototype&&a!=Object.prototype&&(a[c]=d.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.iteratorFromArray=function(a,c){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var d=0,b={next:function(){if(d<a.length){var f=d++;return{value:c(f,a[f]),done:!1}}b.next=function(){return{done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};
$jscomp.polyfill=function(a,c,d,b){if(c){d=$jscomp.global;a=a.split(".");for(b=0;b<a.length-1;b++){var f=a[b];f in d||(d[f]={});d=d[f]}a=a[a.length-1];b=d[a];c=c(b);c!=b&&null!=c&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
function ConceptScheme(a,c,d){if(Array.isArray(a)){if("undefined"===typeof c)throw Error("ID must be supplied with Concept array");this._scheme={type:"ConceptScheme",id:c,concept:a}}else if("object"===typeof a&&null!==a&&"undefined"!==typeof a.concept&&"undefined"!==typeof a.id&&"ConceptScheme"===a.type)this._scheme=a;else throw Error("Invalid scheme supplied to ConceptScheme");a=Array.isArray(d)?d.reduce(function(a,b){a[b]=!0;return a},{}):"object"===typeof d?d:null;c=[];d={};for(var b,f=0;f<this._scheme.concept.length;f++)if(b=
new Concept(this._scheme.concept[f]),b._partOfScheme=!0,d[b.id]=b,null===a||a[b.id])if(c.push(b),null!==a&&"object"===typeof a[b.id]){var e=a[b.id],h;for(h in e)e.hasOwnProperty(h)&&(b._originalConcept[h]=e[h])}for(h=0;h<c.length;h++){b=c[h];f={};e=b._originalConcept.broader||b._originalConcept.broaderTransitive||[];Array.isArray(e)||(e=[e]);for(var k=0;k<e.length;k++){var g=e[k];if(d[g]){if(!0===f[g])throw Error('Invalid scheme supplied to ConceptScheme: Concept "'+b.id+'" has duplicated broader references to "'+
g+'"');null===a||a[g]||c.push(d[g]);b._broaderConcepts.push(d[g]);f[g]=!0}else throw Error('Invalid scheme supplied to ConceptScheme: Concept "'+b.id+'" has referenced broader Concept "'+g+'", which was not found in scheme');}}h=[];f={};e={};for(k=0;k<c.length;k++){b=c[k];f[b.id]=b;e[b.prefLabel]=b;if(b.altLabel&&Array.isArray(b.altLabel))for(g=0;g<b.altLabel.length;g++)e[b.altLabel[g]]=b;b._topConceptOf===this._scheme.id&&h.push(b)}for(k=0;k<c.length;k++){b=c[k];if(b._originalConcept.related&&Array.isArray(b._originalConcept.related)){g=
{};for(var m=b._originalConcept.related.length;m--;){var l=b._originalConcept.related[m];if(!f[l]&&d[l])b._originalConcept.related.splice(m,1);else if(f[l]){if(!0===g[l])throw Error('Invalid scheme supplied to ConceptScheme: Concept "'+b.id+'" has duplicated related references to "'+l+'"');b._relatedConcepts.push(f[l]);g[l]=!0}else throw Error('Invalid scheme supplied to ConceptScheme: Concept "'+b.id+'" has referenced related Concept "'+l+'", which was not found in scheme');}}for(g=0;g<b._broaderConcepts.length;g++)b._broaderConcepts[g]._narrowerConcepts.push(b)}null!==
a&&(this._scheme.concept=c.map(function(a){return a._originalConcept}));this._topConcepts=h.sort(Concept.compare);this._index=f;this._labelIndex=e}ConceptScheme.prototype.getConceptByID=function(a){return this._index[a]?this._index[a]:null};ConceptScheme.prototype.getConceptByLabel=function(a){return this._labelIndex[a]||null};ConceptScheme.prototype.getAllConcepts=function(){var a=this._index;return(Object.values?Object.values(a):Object.keys(a).map(function(c){return a[c]})).sort(Concept.compare)};
ConceptScheme.prototype.getAllConceptsByID=function(){return this._index};ConceptScheme.prototype.getAllConceptsByLabel=function(){return this._labelIndex};ConceptScheme.prototype.getTopConcepts=function(){return this._topConcepts};ConceptScheme.prototype.getJSON=function(){return this._scheme};
ConceptScheme.prototype.toString=function(){function a(c,d){return c.getNarrower().reduce(function(b,c){return b.concat(a(c,d+2))},[Array(d).join(" ")+"- "+c.toString()])}return this._topConcepts.reduce(function(c,d){return c.concat(a(d,1))},[]).join("\n")};ConceptScheme.prototype.generateSubset=function(a){return new ConceptScheme(this._scheme,null,a)};
function Concept(a){if(!a.prefLabel||!a.id||"Concept"!==a.type)throw Error('Invalid concept: "'+a.id+'"');this.id=a.id;this.prefLabel=a.prefLabel;this.altLabel=a.altLabel;this.hiddenLabel=a.hiddenLabel;this.definition=a.definition;this._topConceptOf=a.topConceptOf;this._partOfScheme=!1;this._originalConcept=a;this._broaderConcepts=[];this._narrowerConcepts=[];this._relatedConcepts=[]}
Concept.prototype.getNarrower=function(){if(!this._partOfScheme)throw Error("Concept must have been generated by ConceptScheme to support getNarrower");return this._narrowerConcepts.sort(Concept.compare)};
Concept.prototype.getNarrowerTransitive=function(){function a(c,b){for(var d=0;d<c._narrowerConcepts.length;d++){var e=c._narrowerConcepts[d];b[e.id]=e;a(e,b)}return b}if(!this._partOfScheme)throw Error("Concept must have been generated by ConceptScheme to support getNarrowerTransitive");var c=a(this,{});return(Object.values?Object.values(c):Object.keys(c).map(function(a){return c[a]})).sort(Concept.compare)};
Concept.prototype.getBroader=function(){if(!this._partOfScheme)throw Error("Concept must have been generated by ConceptScheme to support getBroader");return this._broaderConcepts.sort(Concept.compare)};
Concept.prototype.getBroaderTransitive=function(){function a(c,b){for(var d=0;d<c._broaderConcepts.length;d++){var e=c._broaderConcepts[d];b[e.id]=e;a(e,b)}return b}if(!this._partOfScheme)throw Error("Concept must have been generated by ConceptScheme to support getBroaderTransitive");var c=a(this,{});return(Object.values?Object.values(c):Object.keys(c).map(function(a){return c[a]})).sort(Concept.compare)};
Concept.prototype.getRelated=function(){if(!this._partOfScheme)throw Error("Concept must have been generated by ConceptScheme to support getRelated");return this._relatedConcepts.sort(Concept.compare)};Concept.prototype.equals=function(a){a=null===a||"undefined"===typeof a.constructor||"Concept"!==a.constructor.name?new Concept(a):a;return this.id===a.id};Concept.compare=function(a,c){return a.prefLabel<c.prefLabel?-1:a.prefLabel>c.prefLabel?1:0};Concept.prototype.toString=function(){return this._originalConcept.prefLabel};
Concept.prototype.getJSON=function(){return this._originalConcept};var skos={ConceptScheme:ConceptScheme,Concept:Concept};(function(){"undefined"!==typeof module&&module.exports?module.exports=skos:this.skos=skos})();
