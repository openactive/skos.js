var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
function ConceptScheme(a,b){function c(a){for(var b=0;b<a.length;b++){var c=a[b];if(!c.prefLabel||!c.id||"Concept"!==c.type)return!1}return!0}if(Array.isArray(a)&&c(a)){if("undefined"===typeof schemeId)throw Error("ID must be supplied with Concept array");this.scheme={type:"ConceptScheme",id:b,concept:a}}else if(a.concept&&a.id&&"ConceptScheme"===a.type&&c(a.concept))this.scheme=a;else throw Error("Invalid scheme supplied to ConceptScheme");var d=[],e={},f={},g=this.scheme.id;this.scheme.concept.forEach(function(a){var b=
new Concept(a);e[a.id]=b;f[a.prefLabel]=b;a.altLabel&&Array.isArray(a.altLabel)&&a.altLabel.forEach(function(a){f[a]=b});a.topConceptOf===g&&d.push(b)});Object.keys(e).forEach(function(a){var b=e[a];a=b.getJSON();var c=a.broader||a.broaderTransitive||[];a.broader&&!Array.isArray(a.broader)&&(c=[a.broader]);a.broaderTransitive&&!Array.isArray(a.broaderTransitive)&&(c=[a.broaderTransitive]);c.forEach(function(a){if(e[a])b._broaderConcepts.push(e[a]);else throw Error("Invalid scheme supplied to ConceptScheme: referenced Concept "+
a+"not found in scheme");});a.related&&Array.isArray(a.related)&&a.related.forEach(function(a){if(e[a])b._relatedConcepts.push(e[a]);else throw Error("Invalid scheme supplied to ConceptScheme: referenced Concept "+a+"not found in scheme");})});Object.keys(e).forEach(function(a){var b=e[a];b._broaderConcepts.forEach(function(a){a._narrowerConcepts.push(b)})});this.topConcepts=d.sort(Concept.compare);this.index=e;this.labelIndex=f}
ConceptScheme.prototype.getConceptByID=function(a){if(this.index[a])return this.index[a];a="oa:"===a.substring(0,3)?a.replace("oa:","https://openactive.io/"):a;return this.index[a]?this.index[a]:null};ConceptScheme.prototype.getConceptByLabel=function(a){return this.labelIndex[a]||null};ConceptScheme.prototype.getAllConcepts=function(){var a=this.index;return Object.keys(a).map(function(b){return a[b]}).sort(Concept.compare)};ConceptScheme.prototype.getAllConceptsByID=function(){return this.index};
ConceptScheme.prototype.getAllConceptsByLabel=function(){return this.labelIndex};ConceptScheme.prototype.getTopConcepts=function(){return this.topConcepts};ConceptScheme.prototype.getJSON=function(){return this.scheme};ConceptScheme.prototype.toString=function(){function a(b,c){return b.getNarrower().reduce(function(b,e){return b.concat(a(e,c+2))},[Array(c).join(" ")+"- "+b.toString()])}return this.topConcepts.reduce(function(b,c){return b.concat(a(c,1))},[]).join("\n")};
function Concept(a){this.id=a.id;this.prefLabel=a.prefLabel;this.altLabel=a.altLabel;this.hiddenLabel=a.hiddenLabel;this.definition=a.definition;this._originalConcept=a;this._broaderConcepts=[];this._narrowerConcepts=[];this._relatedConcepts=[]}Concept.prototype.getNarrower=function(){return this._narrowerConcepts.sort(Concept.compare)};Concept.prototype.getNarrowerTransitive=function(){function a(b,d){b._narrowerConcepts.forEach(function(b){d[b.id]=b;a(b,d)});return d}var b=a(this,{});return Object.keys(b).map(function(a){return b[a]}).sort(Concept.compare)};
Concept.prototype.getBroader=function(){return this._broaderConcepts.sort(Concept.compare)};Concept.prototype.getBroaderTransitive=function(){function a(b,d){b._broaderConcepts.forEach(function(b){d[b.id]=b;a(b,d)});return d}var b=a(this,{});return Object.keys(b).map(function(a){return b[a]}).sort(Concept.compare)};Concept.prototype.getRelated=function(){return this._relatedConcepts.sort(Concept.compare)};Concept.compare=function(a,b){return a.prefLabel<b.prefLabel?-1:a.prefLabel>b.prefLabel?1:0};
Concept.prototype.toString=function(){return this._originalConcept.prefLabel};Concept.prototype.getJSON=function(){return this._originalConcept};var skos={ConceptScheme:ConceptScheme,Concept:Concept};(function(){"undefined"!==typeof module&&module.exports?module.exports=skos:this.skos=skos})();
